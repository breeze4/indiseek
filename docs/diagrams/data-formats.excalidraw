{
  "type": "excalidraw",
  "version": 2,
  "source": "https://excalidraw.com",
  "elements": [
    {
      "id": "title",
      "type": "text",
      "x": 60,
      "y": 20,
      "width": 277.20000000000005,
      "height": 37.800000000000004,
      "text": "Data Store Formats",
      "fontSize": 28,
      "fontFamily": 2,
      "textAlign": "center",
      "verticalAlign": "top",
      "strokeColor": "#1e1e1e",
      "isDeleted": false,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "rawText": "Data Store Formats"
    },
    {
      "id": "subtitle",
      "type": "text",
      "x": 60,
      "y": 56,
      "width": 562.1,
      "height": 18.900000000000002,
      "text": "What each record looks like, with a concrete example from a Vite codebase",
      "fontSize": 14,
      "fontFamily": 2,
      "textAlign": "left",
      "verticalAlign": "top",
      "strokeColor": "#868e96",
      "isDeleted": false,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "rawText": "What each record looks like, with a concrete example from a Vite codebase"
    },
    {
      "id": "src-bg",
      "type": "rectangle",
      "x": 60,
      "y": 90,
      "width": 720,
      "height": 145,
      "strokeColor": "#adb5bd",
      "backgroundColor": "#dee2e6",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "isDeleted": false
    },
    {
      "id": "src-hdr",
      "type": "text",
      "x": 70,
      "y": 98,
      "width": 396.00000000000006,
      "height": 16.200000000000003,
      "text": "INPUT \u2014 packages/vite/src/node/server/index.ts (lines 45-50)",
      "fontSize": 12,
      "fontFamily": 2,
      "textAlign": "left",
      "verticalAlign": "top",
      "strokeColor": "#495057",
      "isDeleted": false,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "rawText": "INPUT \u2014 packages/vite/src/node/server/index.ts (lines 45-50)"
    },
    {
      "id": "src-code",
      "type": "text",
      "x": 70,
      "y": 120,
      "width": 314.6,
      "height": 105.30000000000001,
      "text": "export function createServer(\n  config: ServerConfig\n): Server {\n  const server = new HttpServer(config.port)\n  return server\n}",
      "fontSize": 13,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "strokeColor": "#1e1e1e",
      "isDeleted": false,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "rawText": "export function createServer(\n  config: ServerConfig\n): Server {\n  const server = new HttpServer(config.port)\n  return server\n}"
    },
    {
      "id": "t1",
      "type": "text",
      "x": 60,
      "y": 248,
      "width": 187.55,
      "height": 14.850000000000001,
      "text": "Tree-sitter AST parse + extract",
      "fontSize": 11,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "strokeColor": "#2b8a3e",
      "isDeleted": false,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "rawText": "Tree-sitter AST parse + extract"
    },
    {
      "id": "t2",
      "type": "text",
      "x": 510,
      "y": 248,
      "width": 199.65,
      "height": 14.850000000000001,
      "text": "chunks.content \u2192 Gemini embed API",
      "fontSize": 11,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "strokeColor": "#e67700",
      "isDeleted": false,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "rawText": "chunks.content \u2192 Gemini embed API"
    },
    {
      "id": "t3",
      "type": "text",
      "x": 880,
      "y": 248,
      "width": 205.70000000000002,
      "height": 14.850000000000001,
      "text": "chunks.content \u2192 en_stem tokenizer",
      "fontSize": 11,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "strokeColor": "#2b8a3e",
      "isDeleted": false,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "rawText": "chunks.content \u2192 en_stem tokenizer"
    },
    {
      "id": "sql-hdr",
      "type": "rectangle",
      "x": 60,
      "y": 275,
      "width": 430,
      "height": 32,
      "strokeColor": "#1971c2",
      "backgroundColor": "#1971c2",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "isDeleted": false
    },
    {
      "id": "sql-title",
      "type": "text",
      "x": 70,
      "y": 282,
      "width": 255.75000000000003,
      "height": 20.25,
      "text": "SQLite (indiseek.db) \u2014 6 tables",
      "fontSize": 15,
      "fontFamily": 2,
      "textAlign": "left",
      "verticalAlign": "top",
      "strokeColor": "#ffffff",
      "isDeleted": false,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "rawText": "SQLite (indiseek.db) \u2014 6 tables"
    },
    {
      "id": "sym-hdr",
      "type": "rectangle",
      "x": 60,
      "y": 317,
      "width": 430,
      "height": 28,
      "strokeColor": "#1971c2",
      "backgroundColor": "#1971c2",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "isDeleted": false
    },
    {
      "id": "sym-title",
      "type": "text",
      "x": 70,
      "y": 322,
      "width": 207.35000000000002,
      "height": 17.55,
      "text": "symbols \u2014 per-symbol metadata",
      "fontSize": 13,
      "fontFamily": 2,
      "textAlign": "left",
      "verticalAlign": "top",
      "strokeColor": "#ffffff",
      "isDeleted": false,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "rawText": "symbols \u2014 per-symbol metadata"
    },
    {
      "id": "sym-body",
      "type": "rectangle",
      "x": 60,
      "y": 345,
      "width": 430,
      "height": 169,
      "strokeColor": "#dee2e6",
      "backgroundColor": "#f8f9fa",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "isDeleted": false
    },
    {
      "id": "sym-text",
      "type": "text",
      "x": 70,
      "y": 353,
      "width": 314.6,
      "height": 133.65,
      "text": "id:         42\nfile_path:  \"packages/vite/src/node/server/index.ts\"\nname:       \"createServer\"\nkind:       \"function\"\nstart_line: 45   end_line: 48   (1-based)\nsignature:  \"export function createServer(con...\"\n\nkinds: function | class | method | interface\n       type | enum | variable",
      "fontSize": 11,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "strokeColor": "#1e1e1e",
      "isDeleted": false,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "rawText": "id:         42\nfile_path:  \"packages/vite/src/node/server/index.ts\"\nname:       \"createServer\"\nkind:       \"function\"\nstart_line: 45   end_line: 48   (1-based)\nsignature:  \"export function createServer(con...\"\n\nkinds: function | class | method | interface\n       type | enum | variable"
    },
    {
      "id": "chk-hdr",
      "type": "rectangle",
      "x": 60,
      "y": 528,
      "width": 430,
      "height": 28,
      "strokeColor": "#1971c2",
      "backgroundColor": "#1971c2",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "isDeleted": false
    },
    {
      "id": "chk-title",
      "type": "text",
      "x": 70,
      "y": 533,
      "width": 314.6,
      "height": 17.55,
      "text": "chunks \u2014 AST-scoped code slices  (KEY TABLE)",
      "fontSize": 13,
      "fontFamily": 2,
      "textAlign": "left",
      "verticalAlign": "top",
      "strokeColor": "#ffffff",
      "isDeleted": false,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "rawText": "chunks \u2014 AST-scoped code slices  (KEY TABLE)"
    },
    {
      "id": "chk-body",
      "type": "rectangle",
      "x": 60,
      "y": 556,
      "width": 430,
      "height": 237,
      "strokeColor": "#dee2e6",
      "backgroundColor": "#f8f9fa",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "isDeleted": false
    },
    {
      "id": "chk-text",
      "type": "text",
      "x": 70,
      "y": 564,
      "width": 350.90000000000003,
      "height": 193.05,
      "text": "id:             137   \u2190 JOIN KEY to LanceDB & Tantivy\nfile_path:      \"packages/vite/src/node/server/index.ts\"\nsymbol_name:    \"createServer\"   (NULL for module chunks)\nchunk_type:     \"function\"\nstart_line:     45\nend_line:       48\ncontent:        \"export function createServer(\\n\"\n                \"  config: ServerConfig\\n): Server {\\n\"\n                \"  const server = new HttpServer(...\"\ntoken_estimate: 32   (= len(content) // 4)\n\nOne chunk per top-level symbol in the file.\nIf file has zero symbols \u2192 one \"module\" chunk = full file.",
      "fontSize": 11,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "strokeColor": "#1e1e1e",
      "isDeleted": false,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "rawText": "id:             137   \u2190 JOIN KEY to LanceDB & Tantivy\nfile_path:      \"packages/vite/src/node/server/index.ts\"\nsymbol_name:    \"createServer\"   (NULL for module chunks)\nchunk_type:     \"function\"\nstart_line:     45\nend_line:       48\ncontent:        \"export function createServer(\\n\"\n                \"  config: ServerConfig\\n): Server {\\n\"\n                \"  const server = new HttpServer(...\"\ntoken_estimate: 32   (= len(content) // 4)\n\nOne chunk per top-level symbol in the file.\nIf file has zero symbols \u2192 one \"module\" chunk = full file."
    },
    {
      "id": "fsum-hdr",
      "type": "rectangle",
      "x": 60,
      "y": 807,
      "width": 430,
      "height": 28,
      "strokeColor": "#1971c2",
      "backgroundColor": "#1971c2",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "isDeleted": false
    },
    {
      "id": "fsum-title",
      "type": "text",
      "x": 70,
      "y": 812,
      "width": 293.15000000000003,
      "height": 17.55,
      "text": "file_summaries \u2014 LLM-generated one-liners",
      "fontSize": 13,
      "fontFamily": 2,
      "textAlign": "left",
      "verticalAlign": "top",
      "strokeColor": "#ffffff",
      "isDeleted": false,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "rawText": "file_summaries \u2014 LLM-generated one-liners"
    },
    {
      "id": "fsum-body",
      "type": "rectangle",
      "x": 60,
      "y": 835,
      "width": 430,
      "height": 169,
      "strokeColor": "#dee2e6",
      "backgroundColor": "#f8f9fa",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "isDeleted": false
    },
    {
      "id": "fsum-text",
      "type": "text",
      "x": 70,
      "y": 843,
      "width": 338.8,
      "height": 133.65,
      "text": "file_path:  \"packages/vite/src/node/server/index.ts\"\nsummary:    \"Creates and configures the Vite dev server\"\n            \"with HMR and middleware support.\"\nlanguage:   \"ts\"\nline_count: 425\n\nGenerated by: gemini-2.0-flash  (1 call per file)\nInput: file content truncated to 30k chars\nPrompt: \"Summarize responsibility in one sentence\"",
      "fontSize": 11,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "strokeColor": "#1e1e1e",
      "isDeleted": false,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "rawText": "file_path:  \"packages/vite/src/node/server/index.ts\"\nsummary:    \"Creates and configures the Vite dev server\"\n            \"with HMR and middleware support.\"\nlanguage:   \"ts\"\nline_count: 425\n\nGenerated by: gemini-2.0-flash  (1 call per file)\nInput: file content truncated to 30k chars\nPrompt: \"Summarize responsibility in one sentence\""
    },
    {
      "id": "ssym-hdr",
      "type": "rectangle",
      "x": 60,
      "y": 1018,
      "width": 430,
      "height": 28,
      "strokeColor": "#1971c2",
      "backgroundColor": "#1971c2",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "isDeleted": false
    },
    {
      "id": "ssym-title",
      "type": "text",
      "x": 70,
      "y": 1023,
      "width": 293.15000000000003,
      "height": 17.55,
      "text": "scip_symbols \u2014 SCIP cross-ref identifiers",
      "fontSize": 13,
      "fontFamily": 2,
      "textAlign": "left",
      "verticalAlign": "top",
      "strokeColor": "#ffffff",
      "isDeleted": false,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "rawText": "scip_symbols \u2014 SCIP cross-ref identifiers"
    },
    {
      "id": "ssym-body",
      "type": "rectangle",
      "x": 60,
      "y": 1046,
      "width": 430,
      "height": 118,
      "strokeColor": "#dee2e6",
      "backgroundColor": "#f8f9fa",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "isDeleted": false
    },
    {
      "id": "ssym-text",
      "type": "text",
      "x": 70,
      "y": 1054,
      "width": 320.65000000000003,
      "height": 89.10000000000001,
      "text": "id:            7\nsymbol:        \"npm vite 5.0.0 src/`createServer`().\"\ndocumentation: \"Create a Vite development server.\"\n\nLocal symbols (function-scoped) filtered out.\nOnly globally-resolvable symbols stored.",
      "fontSize": 11,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "strokeColor": "#1e1e1e",
      "isDeleted": false,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "rawText": "id:            7\nsymbol:        \"npm vite 5.0.0 src/`createServer`().\"\ndocumentation: \"Create a Vite development server.\"\n\nLocal symbols (function-scoped) filtered out.\nOnly globally-resolvable symbols stored."
    },
    {
      "id": "socc-hdr",
      "type": "rectangle",
      "x": 60,
      "y": 1178,
      "width": 430,
      "height": 28,
      "strokeColor": "#1971c2",
      "backgroundColor": "#1971c2",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "isDeleted": false
    },
    {
      "id": "socc-title",
      "type": "text",
      "x": 70,
      "y": 1183,
      "width": 314.6,
      "height": 17.55,
      "text": "scip_occurrences \u2014 where each symbol appears",
      "fontSize": 13,
      "fontFamily": 2,
      "textAlign": "left",
      "verticalAlign": "top",
      "strokeColor": "#ffffff",
      "isDeleted": false,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "rawText": "scip_occurrences \u2014 where each symbol appears"
    },
    {
      "id": "socc-body",
      "type": "rectangle",
      "x": 60,
      "y": 1206,
      "width": 430,
      "height": 152,
      "strokeColor": "#dee2e6",
      "backgroundColor": "#f8f9fa",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "isDeleted": false
    },
    {
      "id": "socc-text",
      "type": "text",
      "x": 70,
      "y": 1214,
      "width": 272.25,
      "height": 118.80000000000001,
      "text": "symbol_id:  7   \u2192 scip_symbols.id\nfile_path:  \"src/node/server/index.ts\"\nstart_line: 44   start_col: 16   (0-BASED!)\nend_line:   44   end_col:   28\nrole:       \"definition\"   (or \"reference\")\n\nWarning: lines are 0-based (SCIP convention),\nunlike symbols/chunks which are 1-based.",
      "fontSize": 11,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "strokeColor": "#1e1e1e",
      "isDeleted": false,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "rawText": "symbol_id:  7   \u2192 scip_symbols.id\nfile_path:  \"src/node/server/index.ts\"\nstart_line: 44   start_col: 16   (0-BASED!)\nend_line:   44   end_col:   28\nrole:       \"definition\"   (or \"reference\")\n\nWarning: lines are 0-based (SCIP convention),\nunlike symbols/chunks which are 1-based."
    },
    {
      "id": "srel-hdr",
      "type": "rectangle",
      "x": 60,
      "y": 1372,
      "width": 430,
      "height": 28,
      "strokeColor": "#1971c2",
      "backgroundColor": "#1971c2",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "isDeleted": false
    },
    {
      "id": "srel-title",
      "type": "text",
      "x": 70,
      "y": 1377,
      "width": 278.85,
      "height": 17.55,
      "text": "scip_relationships \u2014 symbol connections",
      "fontSize": 13,
      "fontFamily": 2,
      "textAlign": "left",
      "verticalAlign": "top",
      "strokeColor": "#ffffff",
      "isDeleted": false,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "rawText": "scip_relationships \u2014 symbol connections"
    },
    {
      "id": "srel-body",
      "type": "rectangle",
      "x": 60,
      "y": 1400,
      "width": 430,
      "height": 118,
      "strokeColor": "#dee2e6",
      "backgroundColor": "#f8f9fa",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "isDeleted": false
    },
    {
      "id": "srel-text",
      "type": "text",
      "x": 70,
      "y": 1408,
      "width": 242.00000000000003,
      "height": 89.10000000000001,
      "text": "symbol_id:         7   \u2192 scip_symbols.id\nrelated_symbol_id: 12  \u2192 scip_symbols.id\nrelationship:      \"implementation\"\n\nTypes: implementation | type_definition\n       reference | definition",
      "fontSize": 11,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "strokeColor": "#1e1e1e",
      "isDeleted": false,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "rawText": "symbol_id:         7   \u2192 scip_symbols.id\nrelated_symbol_id: 12  \u2192 scip_symbols.id\nrelationship:      \"implementation\"\n\nTypes: implementation | type_definition\n       reference | definition"
    },
    {
      "id": "lance-hdr",
      "type": "rectangle",
      "x": 510,
      "y": 275,
      "width": 350,
      "height": 32,
      "strokeColor": "#e67700",
      "backgroundColor": "#e67700",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "isDeleted": false
    },
    {
      "id": "lance-title",
      "type": "text",
      "x": 520,
      "y": 282,
      "width": 247.50000000000003,
      "height": 20.25,
      "text": "LanceDB (vector store on disk)",
      "fontSize": 15,
      "fontFamily": 2,
      "textAlign": "left",
      "verticalAlign": "top",
      "strokeColor": "#ffffff",
      "isDeleted": false,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "rawText": "LanceDB (vector store on disk)"
    },
    {
      "id": "lchk-hdr",
      "type": "rectangle",
      "x": 510,
      "y": 317,
      "width": 350,
      "height": 28,
      "strokeColor": "#e67700",
      "backgroundColor": "#e67700",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "isDeleted": false
    },
    {
      "id": "lchk-title",
      "type": "text",
      "x": 520,
      "y": 322,
      "width": 271.70000000000005,
      "height": 17.55,
      "text": "Table \"chunks\" \u2014 embeddings + metadata",
      "fontSize": 13,
      "fontFamily": 2,
      "textAlign": "left",
      "verticalAlign": "top",
      "strokeColor": "#ffffff",
      "isDeleted": false,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "rawText": "Table \"chunks\" \u2014 embeddings + metadata"
    },
    {
      "id": "lchk-body",
      "type": "rectangle",
      "x": 510,
      "y": 345,
      "width": 350,
      "height": 203,
      "strokeColor": "#dee2e6",
      "backgroundColor": "#f8f9fa",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "isDeleted": false
    },
    {
      "id": "lchk-text",
      "type": "text",
      "x": 520,
      "y": 353,
      "width": 290.40000000000003,
      "height": 163.35000000000002,
      "text": "vector:      [0.023, -0.041, 0.117,\n              0.089, -0.156, 0.034,\n              ...  768 float32 values  ]\n\nchunk_id:    137   \u2192 SQLite chunks.id\nfile_path:   \"packages/vite/src/.../index.ts\"\nsymbol_name: \"createServer\"\n             (\"\" when NULL \u2014 no nullable fields)\nchunk_type:  \"function\"\ncontent:     \"export function createServer(...\"\n             (full source text, same as SQLite)",
      "fontSize": 11,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "strokeColor": "#1e1e1e",
      "isDeleted": false,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "rawText": "vector:      [0.023, -0.041, 0.117,\n              0.089, -0.156, 0.034,\n              ...  768 float32 values  ]\n\nchunk_id:    137   \u2192 SQLite chunks.id\nfile_path:   \"packages/vite/src/.../index.ts\"\nsymbol_name: \"createServer\"\n             (\"\" when NULL \u2014 no nullable fields)\nchunk_type:  \"function\"\ncontent:     \"export function createServer(...\"\n             (full source text, same as SQLite)"
    },
    {
      "id": "lhow-hdr",
      "type": "rectangle",
      "x": 510,
      "y": 562,
      "width": 350,
      "height": 28,
      "strokeColor": "#495057",
      "backgroundColor": "#495057",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "isDeleted": false
    },
    {
      "id": "lhow-title",
      "type": "text",
      "x": 520,
      "y": 567,
      "width": 178.75000000000003,
      "height": 17.55,
      "text": "How: source text \u2192 vector",
      "fontSize": 13,
      "fontFamily": 2,
      "textAlign": "left",
      "verticalAlign": "top",
      "strokeColor": "#ffffff",
      "isDeleted": false,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "rawText": "How: source text \u2192 vector"
    },
    {
      "id": "lhow-body",
      "type": "rectangle",
      "x": 510,
      "y": 590,
      "width": 350,
      "height": 186,
      "strokeColor": "#dee2e6",
      "backgroundColor": "#f8f9fa",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "isDeleted": false
    },
    {
      "id": "lhow-text",
      "type": "text",
      "x": 520,
      "y": 598,
      "width": 302.5,
      "height": 148.5,
      "text": "1. Read chunks.content from SQLite\n2. Group into batches of 20 chunks\n3. Send to Gemini Embedding API:\n   model:  gemini-embedding-001\n   input:  raw content (no prefix/format)\n   output: 768-dim float32 vector\n4. Store vector + chunk metadata in LanceDB\n\nResume: already-embedded chunk_ids are skipped.\nRetry: 1 retry/batch, 3 consecutive fails = abort.",
      "fontSize": 11,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "strokeColor": "#1e1e1e",
      "isDeleted": false,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "rawText": "1. Read chunks.content from SQLite\n2. Group into batches of 20 chunks\n3. Send to Gemini Embedding API:\n   model:  gemini-embedding-001\n   input:  raw content (no prefix/format)\n   output: 768-dim float32 vector\n4. Store vector + chunk metadata in LanceDB\n\nResume: already-embedded chunk_ids are skipped.\nRetry: 1 retry/batch, 3 consecutive fails = abort."
    },
    {
      "id": "lsearch-hdr",
      "type": "rectangle",
      "x": 510,
      "y": 790,
      "width": 350,
      "height": 28,
      "strokeColor": "#495057",
      "backgroundColor": "#495057",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "isDeleted": false
    },
    {
      "id": "lsearch-title",
      "type": "text",
      "x": 520,
      "y": 795,
      "width": 228.8,
      "height": 17.55,
      "text": "At query time: cosine similarity",
      "fontSize": 13,
      "fontFamily": 2,
      "textAlign": "left",
      "verticalAlign": "top",
      "strokeColor": "#ffffff",
      "isDeleted": false,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "rawText": "At query time: cosine similarity"
    },
    {
      "id": "lsearch-body",
      "type": "rectangle",
      "x": 510,
      "y": 818,
      "width": 350,
      "height": 152,
      "strokeColor": "#dee2e6",
      "backgroundColor": "#f8f9fa",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "isDeleted": false
    },
    {
      "id": "lsearch-text",
      "type": "text",
      "x": 520,
      "y": 826,
      "width": 229.9,
      "height": 118.80000000000001,
      "text": "Input: \"HMR propagation\"\n  1. Embed query with same API/model\n  2. Cosine distance search in LanceDB\n  3. Returns: chunk_id, file_path,\n     symbol_name, content, score\n\nLower _distance = more similar.\nScore inverted for ranking.",
      "fontSize": 11,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "strokeColor": "#1e1e1e",
      "isDeleted": false,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "rawText": "Input: \"HMR propagation\"\n  1. Embed query with same API/model\n  2. Cosine distance search in LanceDB\n  3. Returns: chunk_id, file_path,\n     symbol_name, content, score\n\nLower _distance = more similar.\nScore inverted for ranking."
    },
    {
      "id": "tan-hdr",
      "type": "rectangle",
      "x": 880,
      "y": 275,
      "width": 350,
      "height": 32,
      "strokeColor": "#2b8a3e",
      "backgroundColor": "#2b8a3e",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "isDeleted": false
    },
    {
      "id": "tan-title",
      "type": "text",
      "x": 890,
      "y": 282,
      "width": 247.50000000000003,
      "height": 20.25,
      "text": "Tantivy (BM25 full-text index)",
      "fontSize": 15,
      "fontFamily": 2,
      "textAlign": "left",
      "verticalAlign": "top",
      "strokeColor": "#ffffff",
      "isDeleted": false,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "rawText": "Tantivy (BM25 full-text index)"
    },
    {
      "id": "tdoc-hdr",
      "type": "rectangle",
      "x": 880,
      "y": 317,
      "width": 350,
      "height": 28,
      "strokeColor": "#2b8a3e",
      "backgroundColor": "#2b8a3e",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "isDeleted": false
    },
    {
      "id": "tdoc-title",
      "type": "text",
      "x": 890,
      "y": 322,
      "width": 207.35000000000002,
      "height": 17.55,
      "text": "BM25 Document \u2014 one per chunk",
      "fontSize": 13,
      "fontFamily": 2,
      "textAlign": "left",
      "verticalAlign": "top",
      "strokeColor": "#ffffff",
      "isDeleted": false,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "rawText": "BM25 Document \u2014 one per chunk"
    },
    {
      "id": "tdoc-body",
      "type": "rectangle",
      "x": 880,
      "y": 345,
      "width": 350,
      "height": 254,
      "strokeColor": "#dee2e6",
      "backgroundColor": "#f8f9fa",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "isDeleted": false
    },
    {
      "id": "tdoc-text",
      "type": "text",
      "x": 890,
      "y": 353,
      "width": 284.35,
      "height": 207.90000000000003,
      "text": "chunk_id:    137   \u2192 SQLite chunks.id\n\ncontent:     \"export function createServer...\"\n  tokenizer: en_stem (English stemming)\n  tokens:    [\"export\", \"function\",\n              \"createserv\", \"config\",\n              \"serverconfig\", \"server\",\n              \"httpserver\", \"port\", ...]\n\nfile_path:   \".../index.ts\"  (raw, no tokenize)\nsymbol_name: \"createServer\"  (raw)\nchunk_type:  \"function\"      (raw)\nstart_line:  45   (stored only, not indexed)\nend_line:    48   (stored only, not indexed)",
      "fontSize": 11,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "strokeColor": "#1e1e1e",
      "isDeleted": false,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "rawText": "chunk_id:    137   \u2192 SQLite chunks.id\n\ncontent:     \"export function createServer...\"\n  tokenizer: en_stem (English stemming)\n  tokens:    [\"export\", \"function\",\n              \"createserv\", \"config\",\n              \"serverconfig\", \"server\",\n              \"httpserver\", \"port\", ...]\n\nfile_path:   \".../index.ts\"  (raw, no tokenize)\nsymbol_name: \"createServer\"  (raw)\nchunk_type:  \"function\"      (raw)\nstart_line:  45   (stored only, not indexed)\nend_line:    48   (stored only, not indexed)"
    },
    {
      "id": "ttok-hdr",
      "type": "rectangle",
      "x": 880,
      "y": 613,
      "width": 350,
      "height": 28,
      "strokeColor": "#495057",
      "backgroundColor": "#495057",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "isDeleted": false
    },
    {
      "id": "ttok-title",
      "type": "text",
      "x": 890,
      "y": 618,
      "width": 221.65,
      "height": 17.55,
      "text": "How: en_stem tokenizer examples",
      "fontSize": 13,
      "fontFamily": 2,
      "textAlign": "left",
      "verticalAlign": "top",
      "strokeColor": "#ffffff",
      "isDeleted": false,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "rawText": "How: en_stem tokenizer examples"
    },
    {
      "id": "ttok-body",
      "type": "rectangle",
      "x": 880,
      "y": 641,
      "width": 350,
      "height": 237,
      "strokeColor": "#dee2e6",
      "backgroundColor": "#f8f9fa",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "isDeleted": false
    },
    {
      "id": "ttok-text",
      "type": "text",
      "x": 890,
      "y": 649,
      "width": 235.95000000000002,
      "height": 193.05,
      "text": "\"createServer\"    \u2192 \"createserv\"\n\"HttpServer\"      \u2192 \"httpserver\"\n\"configuration\"   \u2192 \"configur\"\n\"dependencies\"    \u2192 \"depend\"\n\nStemming enables partial-match queries.\n\"configure\" finds \"configuration\".\n\nraw fields (file_path, symbol_name):\n  stored as-is, exact match only.\n\nQueries parsed against content only.\nBM25 scoring: higher = more relevant.",
      "fontSize": 11,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "strokeColor": "#1e1e1e",
      "isDeleted": false,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "rawText": "\"createServer\"    \u2192 \"createserv\"\n\"HttpServer\"      \u2192 \"httpserver\"\n\"configuration\"   \u2192 \"configur\"\n\"dependencies\"    \u2192 \"depend\"\n\nStemming enables partial-match queries.\n\"configure\" finds \"configuration\".\n\nraw fields (file_path, symbol_name):\n  stored as-is, exact match only.\n\nQueries parsed against content only.\nBM25 scoring: higher = more relevant."
    },
    {
      "id": "tlife-hdr",
      "type": "rectangle",
      "x": 880,
      "y": 892,
      "width": 350,
      "height": 28,
      "strokeColor": "#495057",
      "backgroundColor": "#495057",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "isDeleted": false
    },
    {
      "id": "tlife-title",
      "type": "text",
      "x": 890,
      "y": 897,
      "width": 107.25000000000001,
      "height": 17.55,
      "text": "Index lifecycle",
      "fontSize": 13,
      "fontFamily": 2,
      "textAlign": "left",
      "verticalAlign": "top",
      "strokeColor": "#ffffff",
      "isDeleted": false,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "rawText": "Index lifecycle"
    },
    {
      "id": "tlife-body",
      "type": "rectangle",
      "x": 880,
      "y": 920,
      "width": 350,
      "height": 169,
      "strokeColor": "#dee2e6",
      "backgroundColor": "#f8f9fa",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "isDeleted": false
    },
    {
      "id": "tlife-text",
      "type": "text",
      "x": 890,
      "y": 928,
      "width": 229.9,
      "height": 133.65,
      "text": "build_index():\n  1. rm -rf index directory\n  2. Read ALL chunks from SQLite\n  3. Write all docs in single pass\n  4. Commit + wait for merge threads\n\nNo incremental updates \u2014 full rebuild.\nFast enough it doesn't matter.\nWriter heap: 50MB.",
      "fontSize": 11,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "strokeColor": "#1e1e1e",
      "isDeleted": false,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "rawText": "build_index():\n  1. rm -rf index directory\n  2. Read ALL chunks from SQLite\n  3. Write all docs in single pass\n  4. Commit + wait for merge threads\n\nNo incremental updates \u2014 full rebuild.\nFast enough it doesn't matter.\nWriter heap: 50MB."
    },
    {
      "id": "join-bg",
      "type": "rectangle",
      "x": 60,
      "y": 1548,
      "width": 1170,
      "height": 50,
      "strokeColor": "#e67700",
      "backgroundColor": "#fff3bf",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roughness": 1,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "roundness": {
        "type": 3
      },
      "boundElements": [],
      "isDeleted": false
    },
    {
      "id": "join-text",
      "type": "text",
      "x": 75,
      "y": 1556,
      "width": 660.0,
      "height": 32.400000000000006,
      "text": "JOIN KEY:  chunk_id  connects all three stores  \u2192  SQLite chunks.id is the primary key.\nLanceDB and Tantivy both store chunk_id as a foreign key to correlate search results back to SQLite.",
      "fontSize": 12,
      "fontFamily": 3,
      "textAlign": "left",
      "verticalAlign": "top",
      "strokeColor": "#1e1e1e",
      "isDeleted": false,
      "opacity": 100,
      "angle": 0,
      "groupIds": [],
      "rawText": "JOIN KEY:  chunk_id  connects all three stores  \u2192  SQLite chunks.id is the primary key.\nLanceDB and Tantivy both store chunk_id as a foreign key to correlate search results back to SQLite."
    }
  ],
  "appState": {
    "viewBackgroundColor": "#ffffff",
    "gridSize": 20
  },
  "files": {}
}